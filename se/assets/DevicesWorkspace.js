import{u as c,j as i,r as _,S as j}from"./index.js";import{F as P,C as E,O as V,a as A,b as H}from"./OptionMaterial.js";const I="_option_pk5hw_14",W="_text_pk5hw_42",K="_shine_pk5hw_1",R={option:I,text:W,"image-failed":"_image-failed_pk5hw_1",shine:K},{option:q,text:z}=R,G=({name:t,active:s})=>{const n=c(o=>o.updateActiveFunction);return i.jsx("li",{className:"closing",children:i.jsxs("label",{className:q,children:[i.jsx("input",{className:"invisible",type:"checkbox",checked:s,onChange:()=>n(t)}),i.jsx("span",{}),i.jsx("mark",{className:z,children:t})]})})},J="_wrap_1u2pn_14",Q="_list_1u2pn_20",T="_shine_1u2pn_1",U={wrap:J,list:Q,"image-failed":"_image-failed_1u2pn_1",shine:T},{wrap:X,list:Y}=U,Z=(t,s)=>{const n=[];return t&&t.props.forEach((o,d)=>{n.push(i.jsx(de,{group:t.name,prop:o.conf_product_group,values:o.values},`${s}-${d}`))}),n},ee=()=>{const t=_.useId(),s=c(o=>o.getFunctionsKinds()),n=_.useMemo(()=>Z(s,t),[s,t]);return n.length===0?null:i.jsx("div",{className:X,children:i.jsx("div",{className:Y,children:n})})},te="_wrap_1gcs5_14",se="_caption_1gcs5_21",ne="_list_1gcs5_38",ce="_shine_1gcs5_1",ie={wrap:te,caption:se,list:ne,"image-failed":"_image-failed_1gcs5_1",shine:ce},{wrap:oe,caption:le,list:re}=ie,ae=(t,s,n,o,d)=>{const l=[];return o.forEach((r,p)=>{l.push(i.jsx(ve,{group:s,prop:n,value:r,eventHandler:()=>d(s,n,r)},`${t}-${p}`))}),l},de=({group:t,prop:s,values:n})=>{const o=_.useId(),d=c(h=>h.dictionary.ru),l=c(h=>h.setFunctionProp),r=_.useMemo(()=>ae(o,t,s,n,l),[o,t,s,n,l]),p=d[s];return p||console.log("\x1B[31m%s\x1B[0m","В словаре не указан перевод свойства!",s),i.jsxs("div",{className:oe,children:[i.jsx("h3",{className:le,style:p?{}:{color:"red"},children:p||s}),i.jsx("ul",{className:re,children:r})]})},ue="_option_1k6n2_14",pe="_shine_1k6n2_1",he={option:ue,"image-failed":"_image-failed_1k6n2_1",shine:pe},{option:me}=he,ve=({group:t,prop:s,value:n,eventHandler:o})=>{const l=c(r=>r.checkSelectedFunction)(t,s,n);return c(r=>r.filtersDevices),i.jsx("li",{children:i.jsxs("label",{className:me,children:[i.jsx("input",{className:"invisible",type:"checkbox",checked:l,onChange:o}),i.jsx("span",{children:n})]})})},_e=(t,s,n,o,d,l,r,p,h,m)=>{const u=[];return t.forEach(g=>{const a=s(g);if(!a)return;const v=d("brand",a.name),F=()=>{const x=()=>{n("brand",a.name),r("collection"),o("brand",a.name),l("collection")};if(!v){if(!p){x();return}h("При выборе бренда, будет сброшена выбранная ранее коллекция","Оставить бренд","Изменить бренд",{from:"brand",brandName:a.name,collectionName:null})}};u.push(i.jsx(V,{img:a.image,value:a.name,isChecked:v,eventHandler:F},`${m}-${a.id}`))}),u},ge=(t,s,n,o,d,l,r,p,h)=>{const m=[];return t.forEach(u=>{const g=o("collection",u),a=d(u),v=l?a===l:!0,F=()=>{const x=()=>{s("collection",u),s("brand",a),n("collection",u),n("brand",a)};if(!g){if(!l||l&&v){x(),h();return}r("При выборе коллекции, будет сброшен выбранный ранее бренд","Оставить коллекцию","Изменить коллекцию",{from:"collection",brandName:a,collectionName:u})}};m.push(i.jsx(A,{isChecked:g,value:u,brand:a,selectedBrand:!!l,selectable:v,eventHandler:F},`${p}-${u}`))}),m},Fe=(t,s,n,o,d)=>{const l=[];return t.forEach(r=>{l.push(i.jsx(H,{material:r,setFilter:s,removeFilter:n,checkFilter:o},`${d}-${r}`))}),l},xe=(t,s)=>{const n=[];return t.forEach(o=>{n.push(i.jsx(G,{name:o.name,active:o.active},`${s}-${o.name}`))}),n},$e=()=>{var S;const t=_.useId(),s=c(e=>e.getVendorByName),n=c(e=>{var b;return(b=e.colors)==null?void 0:b.devices}),o=c(e=>e.getDevicesBrandsList()),d=c(e=>e.getDevicesCollectionsList()),l=c(e=>e.getDevicesMaterialList()),r=c(e=>e.getFunctions()),p=c(e=>e.getBrandByCollection),h=c(e=>e.setSingleDevicesFilter),m=c(e=>e.setSingleBordersFilter),u=c(e=>e.checkSingleDevicesFilter),g=c(e=>e.removeSingleBordersFilter),a=c(e=>e.removeSingleDevicesFilter),v=c(e=>e.setPluralDevicesFilter),F=c(e=>e.removePluralDevicesFilter),x=c(e=>e.checkPluralDevicesFilter),y=c(e=>e.filtersDevices.colors),k=c(e=>e.filtersDevices.brand),$=c(e=>e.filtersDevices.collection),C=c(e=>e.filtersDevices.materials).sort().join(", "),L=(S=c(e=>e.filtersDevices.functions).find(e=>e.active))==null?void 0:S.name,f=c(e=>e.setModalSelect),D=c(e=>e.resetSketch),O=c(e=>e.getColorPallette("devices")),w=_.useMemo(()=>_e(o,s,h,m,u,g,a,$,f,t),[o,s,h,m,u,g,a,$,f,t]),B=_.useMemo(()=>ge(d,h,m,u,p,k,f,t,D),[d,h,m,u,p,k,f,t,D]),M=_.useMemo(()=>Fe(l,v,F,x,t),[l,v,F,x,t]),N=_.useMemo(()=>xe(r,t),[r,t]);return i.jsxs(P,{type:"devices",children:[i.jsx(j,{title:"Бренд",critical:!0,selectedValue:k,children:w}),i.jsx(j,{title:"Коллекция",critical:!0,selectedValue:$,children:B}),i.jsx(j,{title:"Материал механизма",selectedValue:C,children:M}),i.jsx(j,{title:"Тип функции",selectedValue:L!=="Все функции"?L:void 0,children:N}),i.jsx(ee,{}),n&&i.jsx(E,{caption:"Цвет механизма",colors:n,setColorFn:v,removeColorFn:F,checkColorFn:x,colorPalette:O,selectedColors:y,type:"devices"})]})};export{$e as default};
