"use strict";function smoothScrollTo(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500,a=window.pageYOffset,s=e-a,i=null;window.requestAnimationFrame(function e(t){var t=t-(i=i||t),n=(n=t,n/=o,s*(--n*n*n+1)+a);window.scrollTo(0,n),t<o&&window.requestAnimationFrame(e)})}var hideModal=function(e){var t=document.getElementById(e);t.classList.remove("visible"),setTimeout(function(){t.classList.add("hidden")},100)},showModal=function(e,t,n){var o=document.getElementById(e),a=o.querySelector(".close");t&&n&&(o.querySelector(".modal__title").innerText=t,o.querySelector(".modal__text").innerText=n),o.classList.remove("hidden"),setTimeout(function(){o.classList.add("visible")},100),a.addEventListener("click",function(){return hideModal(e)})},initTypeTubs=function(){var o=Array.from(document.querySelectorAll(".asd [data-type]")),a=Array.from(document.querySelectorAll(".asd [data-type-target]"));function t(){var e=document.querySelector(".asd__res-count"),t=this.dataset.type,n=document.querySelector('.asd [data-type-target="'.concat(t,'"]'));"image"===t?e.classList.add("hidden"):e.classList.remove("hidden"),o.forEach(function(e){return e.classList.remove("active")}),a.forEach(function(e){return e.classList.remove("visible")}),this.classList.add("active"),n.classList.add("visible")}o.forEach(function(e){e.addEventListener("click",t)})},initDeleteCurrent=function(){var e=document.querySelector(".asd .asd__res-count");e.querySelector("span").addEventListener("click",function(){return e.classList.add("invisible")})},initDroppingSelects=function(){function e(e){e.forEach(function(e){e.addEventListener("click",function(e){var t,n;t=this,(e=e).stopPropagation(),t.classList.contains("select-value")&&e.preventDefault(),(e=t.closest(".asd__select")).classList.toggle("dropped"),e=e.querySelector(".select-value span"),n=t.innerText,t.classList.contains("value")&&(e.innerText=n)})})}var t=Array.from(document.querySelectorAll(".asd .select-value")),n=Array.from(document.querySelectorAll(".asd .asd__select-item .value"));e(t),e(n)},initResetForms=function(){Array.from(document.querySelectorAll('.asd [type="reset"]')).forEach(function(e){e.addEventListener("click",function(){var e=this.closest(".asd .asd__form");Array.from(e.querySelectorAll(".asd [data-default-value]")).forEach(function(e){var t=e.dataset.defaultValue;e.innerText=t})})})},initCustomInputFile=function(){var e=document.getElementById("asdInputfile"),t=document.querySelector(".asd .asd__file-input span"),n=document.querySelector(".asd .asd__file-input button");e.addEventListener("change",function(){var e=this.files[0];/(\.jpg|\.jpeg|\.png|\.webp)$/i.test(e.name)?(t.textContent=e.name,n.classList.remove("hidden")):t.textContent="Неверный формат файла"}),n.addEventListener("click",function(){e.value="",t.textContent="Файл не выбран",n.classList.add("hidden")})},initToggleUseFeed=function(){var e=document.querySelector(".asd__feed-selector .toggler"),t=e.closest(".asd__feed-selector"),n=document.querySelector(".warning"),o=document.querySelector(".uploading");e.addEventListener("click",function(){t.classList.toggle("collapsed"),n.classList.toggle("hidden"),o.classList.toggle("hidden")})},initUploadUserFid=function(){var e=document.getElementById("addUserFeedButton"),t=Array.from(document.querySelectorAll(".asd .uploading__item")),o=document.querySelector(".asd__feed-selector input"),a=e.dataset.modalTitle,s=e.dataset.modalText;e.addEventListener("click",function(e){var n;""===o.value?(e.stopPropagation(),e.preventDefault(),showModal("asdModal",a,s)):(console.log("Ajax запрос загрузка пользовательского фида"),n=document.querySelector(".warning"),setTimeout(function(){var e=n.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop;smoothScrollTo(e.top+t)},100),t.forEach(function(e,t){setInterval(function(){e.classList.remove("hidden")},1e3*t)}),t.forEach(function(t,e){setInterval(function(){var e=t.querySelector(".uploading__check");e.classList.remove("uploading__check_loading"),e.classList.add("uploading__check_checked")},1e3*e+700)}))})},initToggleColumns=function(){var n=Array.from(document.querySelectorAll(".asd [data-target-selector]")),o=Array.from(document.querySelectorAll(".asd .asd__column_toggle")),a=document.querySelector(".asd__tubs-types");n.forEach(function(t){t.addEventListener("click",function(){var e=this.dataset.targetSelector,e=document.querySelector(e);n.forEach(function(e){return e.classList.remove("active")}),o.forEach(function(e){return e.classList.remove("active")}),a.classList.toggle("hidden"),t.classList.add("active"),e.classList.add("active")})})},asdShowResults=function(){var n=document.getElementById("results");n.classList.remove("hidden"),setTimeout(function(){var e=n.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop;smoothScrollTo(e.top+t)},100)},initSearchAnalogButton=function(){var e=document.getElementById("searchAnalogButton");e.addEventListener("click",function(){var e=!1;switch(document.querySelector(".asd [data-type].active").dataset.type){case"code":e=function(){if(""!==document.getElementById("asdInputCode").value)return console.log("Ajax запрос товаров по Артикулу"),!0;showModal("asdModal","Ошибка","Вы не указали Артикул товара")}();break;case"url":e=function(){if(""!==document.getElementById("asdInputUrl").value)return console.log("Ajax запрос товаров по URL"),!0;showModal("asdModal","Ошибка","Вы не указали URL товара")}();break;case"image":e=function(){if(0!==document.getElementById("asdInputfile").files.length)return console.log("Ajax запрос товаров по картинке"),!0;showModal("asdModal","Ошибка","Вы не добавили изображение для поиска")}()}e&&asdShowResults()})},initShowExamples=function(){Array.from(document.querySelectorAll(".asd .examples__link")).forEach(function(e){return e.addEventListener("click",function(){var e=this.dataset.src;document.getElementById("asdModalExample").querySelector(".modal__pic").src=e,showModal("asdModalExample")})})};window.addEventListener("load",function(){initTypeTubs(),initDeleteCurrent(),initDroppingSelects(),initResetForms(),initCustomInputFile(),initToggleUseFeed(),initUploadUserFid(),initToggleColumns(),initSearchAnalogButton(),initShowExamples()});