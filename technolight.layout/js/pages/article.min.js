"use strict";var articleSlides=Array.from(document.querySelectorAll(".billboard__slider .swiper-slide")),initArticleSwiper=function(){document.querySelector(".article__navigation_next"),document.querySelector(".article__navigation_prev");new Swiper(".article__swiper",{loop:!0,slidesPerView:"1",observer:!0,observeParents:!0,observeSlideChildren:!0,watchOverflow:!0,grabCursor:!0,pagination:{el:".article__pagination",bulletClass:"article__bullet",bulletActiveClass:"article__bullet_active",clickable:!0},on:{init:function(){1<this.slides.length||(this.pagination.destroy(),this.el.closest(".article__gallary").querySelector(".article__pagination-container").classList.add("hide"))}}})},initVideoInstructionsSwiper=function(){document.querySelector(".article__accordion-navigation_next"),document.querySelector(".article__accordion-navigation_prev");new Swiper(".article__accordion-video .swiper",{loop:!1,slidesPerView:"auto",observer:!0,observeParents:!0,observeSlideChildren:!0,watchOverflow:!0,grabCursor:!0,pagination:{el:".article__accordion-pagination",bulletClass:"article__accordion-bullet",bulletActiveClass:"article__accordion-bullet_active",clickable:!0},on:{init:function(){1<this.slides.length||(this.pagination.destroy(),this.el.querySelector(".article__pagination-container").classList.add("hide"))}}})},initAddArticleToFavorites=function(){Array.from(document.querySelectorAll(".article__favorite")).forEach(function(e){return e.addEventListener("click",addToFavoritesClickHandler)})},initToggleArticleAccordion=function(){var e=Array.from(document.querySelectorAll(".article__accordion-button"));0!==e.length&&e.forEach(function(e){return e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();e=this.parentNode.querySelector(".article__accordion-collapse");this.classList.toggle("open"),e.classList.toggle("open")})})},initArticleContentTooltip=function(){var t=Array.from(document.querySelectorAll(".article__content-informer"));0!==t.length&&("ontouchstart"in window||navigator.maxTouchPoints)&&(t.forEach(function(e){return e.addEventListener("click",function(){this.querySelector("span").classList.toggle("visible")})}),document.addEventListener("click",function(e){e.target.closest(".article__content-informer")||t.forEach(function(e){return e.querySelector("span").classList.remove("visible")})}))},initArticleCalc=function(){function t(){n=1,r()}var i=document.querySelector(".article__content-calc input"),n=i.value,r=function(){i.value=n},e=document.querySelector(".article__content-calc .inc"),e=(e.addEventListener("click",function(){var e=i.value;(""===(e=e)?t:(n="number"==typeof e?n+1:parseInt(n)+1,r))()}),document.querySelector(".article__content-calc .dec"));e.addEventListener("click",function(){var e=i.value;(""===(e=e)?t:(e="number"==typeof e?n-1:parseInt(n)-1,n=e=e<=0?1:e,r))()}),i.addEventListener("blur",function(){var e=i.value;""!==(e=e)&&0!==parseInt(e)||t()});i.addEventListener("input",function(e){e=e.target.value;""!==e&&(/^\d+$/.test(e)&&(n=e),r())})},initAddArticleToCart=function(){var e=document.querySelector(".article__add-to-cart");e&&e.addEventListener("click",function(){var e,t,i,n,r;e=this,t=parseInt(document.querySelector(".article__content-calc input").value),i=e.dataset.productId,n=e.dataset.title,r=e.dataset.message,window.addProductToCart({art:i,count:t}),showModalMsg(n,r),(i=document.createElement("a")).classList.add("btn","btn_block","btn_dark"),i.href="cart.html",(t=document.createElement("span")).innerText="В корзине",i.appendChild(t),e.parentNode.replaceChild(i,e)})};window.addEventListener("load",function(){document.querySelector(".page-article")&&(initArticleSwiper(),initVideoInstructionsSwiper(),initAddArticleToFavorites(),initToggleArticleAccordion(),initArticleContentTooltip(),initArticleCalc(),initAddArticleToCart(),Fancybox.bind('[data-fancybox="video-instructions"]'))});